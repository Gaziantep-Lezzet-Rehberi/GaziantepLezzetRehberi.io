{% extends 'base.html' %}

{% block title %}{{ recipe.name }} — Gaziantep Lezzet Rehberi{% endblock %}

{% block content %}
<article class="bg-white rounded shadow overflow-hidden">
  {% if recipe.image_url %}
  <div class="w-full h-64 md:h-96 overflow-hidden">
     <img src="{{ image_url(recipe.image_url) }}" alt="{{ recipe.name }}" class="w-full h-full object-cover" />
  </div>
  {% endif %}

  <div class="p-6">
    <div class="flex flex-col md:flex-row md:items-start md:gap-8">
      <div class="flex-1">
        <h1 class="text-3xl font-extrabold mb-2">{{ recipe.name }}</h1>
        <p class="text-gray-700 mb-4">{{ recipe.description }}</p>
      </div>

      <aside class="mt-4 md:mt-0 md:w-64">
        <div class="bg-gray-50 p-4 rounded">
          <div class="flex flex-wrap gap-2 mb-3">
            <span class="text-xs bg-indigo-100 text-indigo-700 px-2 py-1 rounded">{{ recipe.category }}</span>
            <span class="text-xs bg-yellow-100 text-yellow-800 px-2 py-1 rounded">{{ recipe.difficulty }}</span>
            <span class="text-xs bg-green-100 text-green-800 px-2 py-1 rounded">{{ recipe.servings }} Kişi</span>
            {% if recipe.cook_time %}
            <span class="text-xs bg-gray-100 text-gray-800 px-2 py-1 rounded">{{ recipe.cook_time }} dk</span>
            {% endif %}
          </div>
          {% if recipe.image_url %}
          <div class="text-sm text-gray-600">Görsel kaynağı: <br/><em class="break-words">{{ image_url(recipe.image_url) }}</em></div>
          {% endif %}
        </div>
      </aside>
    </div>

    <div class="mt-6 grid grid-cols-1 md:grid-cols-3 gap-6">
      <section class="md:col-span-2">
        <h2 class="text-xl font-semibold mb-2">Malzemeler</h2>
        <ul class="list-disc list-inside mb-6 text-gray-700">
          {% for ing in recipe.ingredients.split('\n') if ing.strip() %}
          <li>{{ ing }}</li>
          {% endfor %}
        </ul>

        <h2 class="text-xl font-semibold mb-2">Yapılışı</h2>
        <ol class="list-decimal list-inside space-y-2 text-gray-700">
          {% for step in recipe.steps.split('\n') if step.strip() %}
          <li>{{ step }}</li>
          {% endfor %}
        </ol>
      </section>

      <aside class="p-4 bg-gray-50 rounded">
        {% if places %}
        <h4 class="font-semibold mt-2">Yakındaki Mekanlar</h4>
        <ul class="text-sm text-gray-700">
          {% for p in places %}
          <li class="mb-2">
            <div class="font-medium">{{ p.name }}</div>
            <div class="text-xs text-gray-600">{{ p.address }}</div>
          </li>
          {% endfor %}
        </ul>
        {% endif %}
      </aside>
    </div>
  </div>
</article>

{% endblock %}
